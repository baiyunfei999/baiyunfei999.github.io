<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>搭建CA证书 | Hexo</title>
  <meta name="description" content="A geeker blog." />
  <meta name="keywords" content="hexo,theme,icer,ggice" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="工具 openCA 、openssl123456789101112131415161718191、Centos7---搭建CA（将Centos7假设为CA）      创建所需要的文件；      # touch /etc/pki/CA/index.txt  生成证书索引数据库文件      # echo 01 &amp;gt; /etc/pki/CA/serial  指定第一个颁发证书的序列号">
<meta name="keywords" content="CA">
<meta property="og:type" content="article">
<meta property="og:title" content="搭建CA证书">
<meta property="og:url" content="http://yoursite.com/2018/01/09/搭建CA证书/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="工具 openCA 、openssl123456789101112131415161718191、Centos7---搭建CA（将Centos7假设为CA）      创建所需要的文件；      # touch /etc/pki/CA/index.txt  生成证书索引数据库文件      # echo 01 &amp;gt; /etc/pki/CA/serial  指定第一个颁发证书的序列号">
<meta property="og:updated_time" content="2018-01-09T04:36:46.379Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="搭建CA证书">
<meta name="twitter:description" content="工具 openCA 、openssl123456789101112131415161718191、Centos7---搭建CA（将Centos7假设为CA）      创建所需要的文件；      # touch /etc/pki/CA/index.txt  生成证书索引数据库文件      # echo 01 &amp;gt; /etc/pki/CA/serial  指定第一个颁发证书的序列号">
  
  
  
  <link rel='stylesheet' href='//cdnjs.xyz/libs/nprogress/0.2.0/nprogress.css'/>
  <link rel="stylesheet" href="//cdnjs.xyz/libs/highlight/9.12.0/styles/github-gist.css">
  <link rel="stylesheet" href="//at.alicdn.com/t/font_405585_2mmfrz9pgd7h9f6r.css">
  <script src='//cdnjs.xyz/libs/nprogress/0.2.0/nprogress.js'></script>
  <!-- <script>try{Typekit.load({ async: false });}catch(e){}</script> -->
  <link rel="stylesheet" href="/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
  ga('create', 'UA-93986029-1', 'auto');
  ga('send', 'pageview');
  
</script>
<!-- End Google Analytics -->


</head>

<body>
  
  <script>NProgress.start();</script>
  
  <div id="site-wrapper">
    
    <header class="header">
  <div class="header-wrapper">
    <a href="/">
      <img src="/image/logo.jpg" class="logo"/>
      <!-- <span class="site-desc">
        
      </span> -->
    </a>
    <div class="social-wrapper">
      
        
          <a href="https://twitter.com/iggice" class="social twitter" target="_blank" rel="external">
            <span class="iconfont icon-twitter"></span>
          </a>
          
          <a href="https://github.com/ggice" class="social github" target="_blank" rel="external">
            <span class="iconfont icon-github"></span>
          </a>
          
          <a href="http://ggice.tumblr.com/" class="social tumblr" target="_blank" rel="external">
            <span class="iconfont icon-tumblr"></span>
          </a>
          
          <a href="https://dribbble.com/ggice" class="social dribbble" target="_blank" rel="external">
            <span class="iconfont icon-dribbble"></span>
          </a>
          
          <a href="mailto:i@ice.gs" class="social email" target="_blank" rel="external">
            <span class="iconfont icon-email"></span>
          </a>
          
          <a href="/atom.xml" class="social rss" target="_blank" rel="external">
            <span class="iconfont icon-rss"></span>
          </a>
          
      
      
      <a href="#" class="social search-do" target="_blank" rel="external">
        <span class="iconfont icon-search"></span>
      </a>
            
      <!-- <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://yoursite.com"></form> -->
    </div>
    <div class="search-wrap">
      <div class="search-content animated fade-in">
        <p class="search-input">
          <span class="iconfont icon-search"></span>
          <input tabindex="1">
        </p>
        <ul class="search-result">
            
              <div class="tags">
                   <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/7修改密码，故障修复/">7修改密码，故障修复</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ansible命令行中的应用/">Ansible命令行中的应用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ansible角色/">Ansible角色</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CA/">CA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Centos6半自动化安装/">Centos6半自动化安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Centos6手动安装步骤/">Centos6手动安装步骤</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Centos7编译安装/">Centos7编译安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DNS/">DNS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux系统调优/">Linux系统调优</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mysqldump数据库恢复/">Mysqldump数据库恢复</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mysql主从复制/">Mysql主从复制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OSI模型的七层结构/">OSI模型的七层结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RAID/">RAID</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/awk/">awk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos6/">centos6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dns转发/">dns转发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dstat/">dstat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/httpd的web账号密码管理/">httpd的web账号密码管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iostat/">iostat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keepalived/">keepalived</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lib64库文件，内核修复/">lib64库文件，内核修复</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lvs服务nat模式/">lvs服务nat模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rpm/">rpm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sed/">sed</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tag1/">tag1</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tag2/">tag2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tar/">tar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/text/">text</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/varnish/">varnish</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim编辑器/">vim编辑器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vmstat/">vmstat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yum/">yum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zabbix-server-zabbix-agent/">zabbix-server/zabbix-agent</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/修复MBR分区，故障处理/">修复MBR分区，故障处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/共享文件系统，vsftpd/">共享文件系统，vsftpd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/创建mysql数据库索引/">创建mysql数据库索引</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/循环语句/">循环语句</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据备份及数据恢复/">数据备份及数据恢复</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日志服务/">日志服务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/进程管理，kill/">进程管理，kill</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/逻辑卷/">逻辑卷</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/防火墙，SElinux/">防火墙，SElinux</a></li></ul>
                </div>
            
        </ul>
      </div>
    </div>
    <nav class="header-nav">
      
        <a href="/" class="archives">
          home
        </a>
        
        <a href="/tags/web-development/" class="archives">
          web development
        </a>
        
        <a href="/tags/soft/" class="archives">
          soft
        </a>
        
        <a href="/tags/os/" class="archives">
          os
        </a>
        
        <a href="/archives" class="archives">
          archives
        </a>
        
        <a href="/about/" class="archives">
          About
        </a>
        
    </nav>
  </div>
</header>
    <script>NProgress.set(0.4);</script>
    
    <main id="main" role="main">
      <article id="post-搭建CA证书"
  class="post article white-box article-type-post animated fade-in-top"
  itemscope itemprop="blogPost">
  <section class="post-header article-header">
    <h2 class="title">
        <a href="/2018/01/09/搭建CA证书/">
          搭建CA证书
        </a>
      </h2>
      <div class="subtitle">
          <time>
            Jan 9, 2018
          </time>
          
            <span class="tags">
                <span class="iconfont icon-tag"></span>
                <a class="tag-link" href="/tags/CA/">CA</a>
              </span>
          
      </div>
  </section>
  <section class="content">
    <div class="article-entry" itemprop="articleBody">
      <p>工具 openCA 、openssl<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1、Centos7---搭建CA（将Centos7假设为CA）</span><br><span class="line">      创建所需要的文件；</span><br><span class="line">      # touch /etc/pki/CA/index.txt  生成证书索引数据库文件</span><br><span class="line">      # echo 01 &gt; /etc/pki/CA/serial  指定第一个颁发证书的序列号</span><br><span class="line">      生成私钥；</span><br><span class="line">      #（umask 066；openssl genrsa -out /etc/pki/CA/private/cakey.pem 2048）</span><br><span class="line">      自签名；</span><br><span class="line">      # openssl req -new -x509 -key /etc/pki/CA/private/cakey.pem  -out /etc/pki/CA/cacerrt.pem -days 3650</span><br><span class="line">2、Centos6---创建申请证书（将Centos6假设为客户端）</span><br><span class="line">      创建私钥；</span><br><span class="line">      #（umask 006;openssl genrsa -out /app/service.key 4096）</span><br><span class="line">      生成申请证书；</span><br><span class="line">      # openssl req -new -key /app/service.key -out /app/service.csr</span><br><span class="line">      将申请证书文件发送到CA（Centos7）;</span><br><span class="line">      # scp /app/service.csr 192.168.239.131:/etc/pki/CA/</span><br><span class="line">3、CA（Centos7）颁发证书及审核；</span><br><span class="line">      #openssl ca -in /etc/pki/CA/service.csr -out /etc/pki/certs/service.crt -days 100</span><br><span class="line">      将证书发送到Centos6（客户端）；</span><br><span class="line">      # scp /etc/pki/CA/certs/service.crt 192.168.239.131:/app/</span><br></pre></td></tr></table></figure></p>
<p>1、搭建CA(centos7.3 假设为CA)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">#vim /etc/pki/tls/openssl.cnf查看配置文件</span><br><span class="line">[root@centos7 ~]#vim /etc/pki/tls/openssl.cnf</span><br><span class="line">#unique_subject = no                    # Set to &apos;no&apos; to allow creation of</span><br><span class="line">                                        # several ctificates with same subject.</span><br><span class="line">new_certs_dir   = $dir/newcerts         # default place for new certs.</span><br><span class="line"></span><br><span class="line">certificate     = $dir/cacert.pem       # The CA certificate</span><br><span class="line">serial          = $dir/serial           # The current serial number</span><br><span class="line">crlnumber       = $dir/crlnumber        # the current crl number</span><br><span class="line">                                        # must be commented out to leave a V1 CRL</span><br><span class="line">crl             = $dir/crl.pem          # The current CRL</span><br><span class="line">private_key     = $dir/private/cakey.pem# The private key</span><br><span class="line">RANDFILE        = $dir/private/.rand    # private random number file</span><br><span class="line"></span><br><span class="line">x509_extensions = usr_cert              # The extentions to add to the cert</span><br><span class="line"></span><br><span class="line"># Comment out the following two lines for the &quot;traditional&quot;</span><br><span class="line"># (and highly broken) format.</span><br><span class="line">name_opt        = ca_default            # Subject Name options</span><br><span class="line">cert_opt        = ca_default            # Certificate field options</span><br><span class="line"></span><br><span class="line"># Extension copying option: use with caution.</span><br><span class="line"># copy_extensions = copy</span><br><span class="line"></span><br><span class="line"># Extensions to add to a CRL. Note: Netscape communicator chokes on V2 CRLs</span><br><span class="line"># so this is commented out by default to leave a V1 CRL.</span><br><span class="line"># crlnumber must also be commented out to leave a V1 CRL.</span><br><span class="line"># crl_extensions        = crl_ext</span><br><span class="line"></span><br><span class="line">default_days    = 365                   # how long to certify for</span><br><span class="line">default_crl_days= 30                    # how long before next CRL</span><br><span class="line">default_md      = sha256                # use SHA-256 by default</span><br><span class="line">preserve        = no                    # keep passed DN ordering</span><br><span class="line"></span><br><span class="line"># A few difference way of specifying how similar the request should look</span><br><span class="line"># For type CA, the listed attributes must be the same, and the optional</span><br><span class="line"># and supplied fields are just that :-)</span><br><span class="line">policy          = policy_match</span><br><span class="line"></span><br><span class="line"># For the CA policy</span><br><span class="line">[ policy_match ]</span><br><span class="line">countryName             = match</span><br><span class="line">stateOrProvinceName     = match</span><br><span class="line">organizationName        = match</span><br><span class="line">organizationalUnitName  = optional</span><br><span class="line">commonName              = supplied</span><br><span class="line">emailAddress            = optional</span><br><span class="line"></span><br><span class="line"># For the &apos;anything&apos; policy</span><br><span class="line"># At this point in time, you must list all acceptable &apos;object&apos;</span><br><span class="line"># types.</span><br><span class="line">[ policy_anything ]</span><br><span class="line">countryName             = optional</span><br><span class="line">stateOrProvinceName     = optional</span><br><span class="line">localityName            = optional</span><br><span class="line">organizationName        = optional</span><br><span class="line">organizationalUnitName  = optional</span><br><span class="line">commonName              = supplied</span><br><span class="line">emailAddress            = optional</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line">创建所需要的文件；</span><br><span class="line">[root@centos7 ~]#cd /etc/pki/CA/</span><br><span class="line">[root@centos7 CA]#ls</span><br><span class="line">certs  crl  newcerts  private</span><br><span class="line">[root@centos7 CA]#tree</span><br><span class="line">.</span><br><span class="line">├── certs</span><br><span class="line">├── crl</span><br><span class="line">├── newcerts</span><br><span class="line">└── private</span><br><span class="line"></span><br><span class="line">4 directories, 0 files</span><br><span class="line">[root@centos7 CA]#touch /etc/pki/CA/index.txt</span><br><span class="line">[root@centos7 CA]#ls</span><br><span class="line">certs  crl  index.txt  newcerts  private</span><br><span class="line">[root@centos7 CA]#echo 01&gt; /etc/pki/CA/serial</span><br><span class="line">[root@centos7 CA]#ls</span><br><span class="line">certs  crl  index.txt  newcerts  private  serial</span><br><span class="line">[root@centos7 CA]#tree</span><br><span class="line">.</span><br><span class="line">├── certs</span><br><span class="line">├── crl</span><br><span class="line">├── index.txt</span><br><span class="line">├── newcerts</span><br><span class="line">├── private</span><br><span class="line">└── serial</span><br><span class="line"></span><br><span class="line">4 directories, 2 files</span><br><span class="line">生成私钥：</span><br><span class="line">[root@centos7 CA]#(umask 066;openssl genrsa -out /etc/pki/CA/private/cakey.pem 2048)</span><br><span class="line">Generating RSA private key, 2048 bit long modulus</span><br><span class="line">..................................................+++</span><br><span class="line">...............................................................................................................................................................................................+++</span><br><span class="line">e is 65537 (0x10001)</span><br><span class="line">[root@centos7 CA]#tree</span><br><span class="line">.</span><br><span class="line">├── certs</span><br><span class="line">├── crl</span><br><span class="line">├── index.txt</span><br><span class="line">├── newcerts</span><br><span class="line">├── private</span><br><span class="line">│   └── cakey.pem</span><br><span class="line">└── serial</span><br><span class="line"></span><br><span class="line">4 directories, 3 files</span><br><span class="line">查看权限</span><br><span class="line">[root@centos7 CA]#ll /etc/pki/CA/private/cakey.pem</span><br><span class="line">-rw-------. 1 root root 1675 Jul 17 20:37 /etc/pki/CA/private/cakey.pem</span><br><span class="line">自签名</span><br><span class="line">[root@centos7 CA]#openssl req -new -x509 -key /etc/pki/CA/private/cakey.pem  -out /etc/pki/CA/cacert.pem -days 3650</span><br><span class="line">You are about to be asked to enter information that will be incorporated</span><br><span class="line">into your certificate request.</span><br><span class="line">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class="line">There are quite a few fields but you can leave some blank</span><br><span class="line">For some fields there will be a default value,</span><br><span class="line">If you enter &apos;.&apos;, the field will be left blank.</span><br><span class="line">-----</span><br><span class="line">Country Name (2 letter code) [XX]:CN</span><br><span class="line">State or Province Name (full name) []:henan</span><br><span class="line">Locality Name (eg, city) [Default City]:zhengzhou</span><br><span class="line">Organization Name (eg, company) [Default Company Ltd]:magedu</span><br><span class="line">Organizational Unit Name (eg, section) []:m24</span><br><span class="line">Common Name (eg, your name or your server&apos;s hostname) []:ca.magedu.com</span><br><span class="line">Email Address []:</span><br><span class="line">[root@centos7 CA]#tree</span><br><span class="line">.</span><br><span class="line">├── cacert.pem</span><br><span class="line">├── certs</span><br><span class="line">├── crl</span><br><span class="line">├── index.txt</span><br><span class="line">├── newcerts</span><br><span class="line">├── private</span><br><span class="line">│   └── cakey.pem</span><br><span class="line">└── serial</span><br><span class="line"></span><br><span class="line">4 directories, 4 files</span><br><span class="line">查看自签名证书</span><br><span class="line">[root@centos7 CA]#openssl x509 -in /etc/pki/CA/cacert.pem  -noout -text</span><br><span class="line">Certificate:</span><br><span class="line">    Data:</span><br><span class="line">        Version: 3 (0x2)</span><br><span class="line">        Serial Number: 10081393424590182561 (0x8be84de7f9a818a1)</span><br><span class="line">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class="line">        Issuer: C=CN, ST=henan, L=zhengzhou, O=magedu, OU=m24, CN=ca.magedu.com</span><br><span class="line">        Validity</span><br><span class="line">            Not Before: Jul 17 12:54:38 2017 GMT</span><br><span class="line">            Not After : Jul 15 12:54:38 2027 GMT</span><br><span class="line">        Subject: C=CN, ST=henan, L=zhengzhou, O=magedu, OU=m24, CN=ca.magedu.com</span><br><span class="line">        Subject Public Key Info:</span><br><span class="line">            Public Key Algorithm: rsaEncryption</span><br><span class="line">                Public-Key: (2048 bit)</span><br><span class="line">                Modulus:</span><br><span class="line">                    00:e3:ad:25:86:7a:47:c1:33:38:2b:a4:51:3c:70:</span><br><span class="line">                    11:3d:3d:e8:0b:58:0f:ad:5e:80:bf:c9:d4:07:ef:</span><br><span class="line">                    9c:33:f2:b8:26:a3:d5:86:4b:3f:74:43:b6:06:75:</span><br><span class="line">                    49:6c:4f:74:04:49:9c:53:7a:ce:44:a8:79:9a:a0:</span><br><span class="line">                    00:82:9d:32:9c:50:38:16:98:a9:e5:78:47:21:06:</span><br><span class="line">                    9b:fc:05:c4:10:49:d6:03:3f:b5:eb:31:20:55:98:</span><br><span class="line">                    7c:dd:fb:fe:96:9c:22:fa:81:94:1b:e1:47:93:3d:</span><br><span class="line">                    fa:4e:03:24:48:94:56:81:75:a1:8d:65:41:66:94:</span><br><span class="line">                    3e:f7:03:97:55:4d:45:80:ff:e5:98:a2:10:38:79:</span><br><span class="line">                    dc:ee:df:44:14:8b:2b:6e:f8:a3:a9:1a:e7:53:28:</span><br><span class="line">                    d8:87:76:1a:7c:e9:8e:15:6c:7f:b2:66:65:ed:58:</span><br><span class="line">                    db:17:c4:f1:36:69:d5:57:d9:8f:49:55:6d:13:91:</span><br><span class="line">                    01:e1:3c:1b:a0:8b:03:b1:97:fb:08:c8:a2:6b:61:</span><br><span class="line">                    4c:45:36:f2:ac:b1:19:8b:41:18:11:63:ce:b6:90:</span><br><span class="line">                    34:ad:f6:4a:b0:e0:01:2e:d8:56:80:6a:12:1e:94:</span><br><span class="line">                    ee:a6:c5:5d:6e:d7:37:f2:e6:5a:5d:14:64:cd:8b:</span><br><span class="line">                    42:5b:38:18:72:9e:62:4c:72:9e:df:fc:90:c5:2f:</span><br><span class="line">                    bd:17</span><br><span class="line">                Exponent: 65537 (0x10001)</span><br><span class="line">        X509v3 extensions:</span><br><span class="line">            X509v3 Subject Key Identifier:</span><br><span class="line">                DC:FC:21:C7:A1:2F:F8:1F:F7:94:9A:A7:13:53:81:48:D5:0F:69:59</span><br><span class="line">            X509v3 Authority Key Identifier:</span><br><span class="line">                keyid:DC:FC:21:C7:A1:2F:F8:1F:F7:94:9A:A7:13:53:81:48:D5:0F:69:59</span><br><span class="line"></span><br><span class="line">            X509v3 Basic Constraints:</span><br><span class="line">                CA:TRUE</span><br><span class="line">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class="line">         c8:cb:9e:75:33:d7:18:27:f5:c6:d7:aa:c2:c2:bf:ff:0f:5f:</span><br><span class="line">         1a:71:01:ab:6b:d7:7a:43:0c:c0:26:bd:8e:0d:bc:d1:14:f1:</span><br><span class="line">         d0:8d:fa:db:5c:b8:e7:c5:2c:4e:7f:41:c4:45:c6:de:66:f7:</span><br><span class="line">         27:b8:b8:75:a7:b7:a7:3d:40:27:6e:2e:69:82:d2:4a:b3:40:</span><br><span class="line">         7c:b2:e3:ba:7a:a8:62:f6:04:85:7c:4d:e4:71:45:c5:24:d7:</span><br><span class="line">         0e:34:f7:49:f8:60:77:6f:6e:41:78:ba:c2:a9:2b:de:f9:fb:</span><br><span class="line">         45:31:8b:de:d9:11:8d:a6:c9:58:1f:9b:2d:55:01:a2:db:02:</span><br><span class="line">         eb:b7:be:3d:42:9c:bf:76:3b:b4:3c:b2:58:64:89:97:e2:c1:</span><br><span class="line">         05:87:65:ab:61:61:8f:23:e5:07:93:6c:9a:d1:79:90:2d:dd:</span><br><span class="line">         c1:e2:f4:c9:3c:fb:89:80:96:f6:4f:6e:94:24:59:2b:65:b2:</span><br><span class="line">         02:ac:be:58:c3:5f:97:7e:86:d3:39:41:af:32:1f:d8:8d:cc:</span><br><span class="line">         14:df:1a:8f:be:9c:d7:23:da:b8:01:e9:4a:d5:d8:0a:0f:1c:</span><br><span class="line">         04:fe:7f:c0:a1:73:51:89:a0:5d:51:10:b7:07:1f:2f:df:59:</span><br><span class="line">         2a:ea:b7:4d:b0:41:d6:79:11:d0:e8:ec:69:78:e3:ba:d4:4c:</span><br><span class="line">         dc:14:20:a6</span><br></pre></td></tr></table></figure>
<p>Centos6创建申请证书<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">创建私钥；</span><br><span class="line">[root@centos6 ~]#(umask 066;openssl genrsa -out /app/service.key 4096)</span><br><span class="line">Generating RSA private key, 4096 bit long modulus</span><br><span class="line">..............++</span><br><span class="line">.....................................................................................................................................++</span><br><span class="line">e is 65537 (0x10001)</span><br><span class="line">[root@centos6 ~]#ll /app/service.key</span><br><span class="line">-rw-------. 1 root root 3247 Jul 16 13:29 /app/service.key</span><br><span class="line">生成申请证书文件；</span><br><span class="line">[root@centos6 ~]#openssl req -new -key /app/service.key  -out /app/service.csr</span><br><span class="line">You are about to be asked to enter information that will be incorporated</span><br><span class="line">into your certificate request.</span><br><span class="line">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class="line">There are quite a few fields but you can leave some blank</span><br><span class="line">For some fields there will be a default value,</span><br><span class="line">If you enter &apos;.&apos;, the field will be left blank.</span><br><span class="line">-----</span><br><span class="line">Country Name (2 letter code) [XX]:CN</span><br><span class="line">State or Province Name (full name) []:henan</span><br><span class="line">Locality Name (eg, city) [Default City]:zhengzhou</span><br><span class="line">Organization Name (eg, company) [Default Company Ltd]:magedu</span><br><span class="line">Organizational Unit Name (eg, section) []:beiguo</span><br><span class="line">Common Name (eg, your name or your server&apos;s hostname) []:*.magedu.com</span><br><span class="line">Email Address []:</span><br><span class="line"></span><br><span class="line">Please enter the following &apos;extra&apos; attributes</span><br><span class="line">to be sent with your certificate request</span><br><span class="line">A challenge password []:</span><br><span class="line">An optional company name []:</span><br><span class="line"></span><br><span class="line">[root@centos6 ~]#cat /app/service.csr</span><br><span class="line">-----BEGIN CERTIFICATE REQUEST-----</span><br><span class="line">MIIErzCCApcCAQAwajELMAkGA1UEBhMCQ04xDjAMBgNVBAgMBWhlbmFuMRIwEAYD</span><br><span class="line">VQQHDAl6aGVuZ3pob3UxDzANBgNVBAoMBm1hZ2VkdTEPMA0GA1UECwwGYmVpZ3Vv</span><br><span class="line">MRUwEwYDVQQDDAwqLm1hZ2VkdS5jb20wggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAw</span><br><span class="line">ggIKAoICAQDABpF263GHabqAJLUdVC+wV1JD+aIJ91jyjAw2RnicPv8SpJ6dVsDY</span><br><span class="line">+V+5hV5c93VwOKC5Xe3ZjSnRfo41OY7dXaOau6rD/oShiWCpyr3LOqM5sLRnQ9qb</span><br><span class="line">v44ivrT/yvABvCZuis/IXvHZmmrH0QCABkmW70A6xoz4hBf3XX9/Y8AZFePplMQ1</span><br><span class="line">3SKdCTzzX6sXrECkquDY9vcAgP4vbJ87/n3awU3ljhM/yd5TQ2kskzm9tWITL5Ae</span><br><span class="line">gnd2FdPBHLYL7Op3qDHI1yRqAfkL/CNAEnuB5JbgDCcOq2fa8yKrRpQAYtCUC6Ze</span><br><span class="line">1AKhCdfYbhsFKcfj9xAkb9EQZVs1HNhyzUrMHQM1+hSx1K30mwFMdKPsDCzTnjh0</span><br><span class="line">Yx6GeZ8xbU7VqHH18kARVXfvNlHd809CK0TZJ+zWnPkZpFCyhdQS1McEs1q6+OTd</span><br><span class="line">aAISvZTwvYQAZbUPJ9GnmZtcBTUtHmb8Qf6cLolYzS1I42X01TFmnHj9N1TP19CV</span><br><span class="line">AR0XanIlFMq4IMXkWBuvLqIliAFnCupC2/yuyg3NUlzPsMiqD/5N1IcPceXiyHHj</span><br><span class="line">wZCFjycVBcKcw39aqq6Yz7erTUR81q5sraBZjVWuA52Jb8LEA8/Oe3W6q23hyB2J</span><br><span class="line">01AZcFe5ah7PWkz687z9X03z4O+BKTJRFkySWkR+Ue3FKkwVD4TrfwIDAQABoAAw</span><br><span class="line">DQYJKoZIhvcNAQEFBQADggIBALy3aIT/eMytX5OoLWt+qFlovEL8WovmqmuVOdiI</span><br><span class="line">hoku+4RJKdeRUQdjs0IY1fWR3U+iulHi8H7EZJb0j6EbAI7CfKGDUi0Y3JAtDkFV</span><br><span class="line">ruCf3e/bXiizSvl07UpclmQLmTkfAVMUUFfvaKbdoLzeRlABt7dc144B3oXfatvX</span><br><span class="line">ftYdg1n47zs+26UrZyXVyHF5/elJcd35reQQZrHaXzyhWPx3FqqZK/mxeR9i3tQY</span><br><span class="line">EtV8JipROolp9d0ae8NHqfmdF2fPbQPfvYiFC+WRwlEHX/Rc590bVvagzgtpp5LP</span><br><span class="line">EgFHMtIuVRMZQlK4WHIp5CUpMFBOq5W9q51VbBoZwS/peIixXUm75+2xLm2oe+pG</span><br><span class="line">iAXUophja0wl/9S6dYBsiuFkVF41V8CzG1dJruKbr+OtZKL3x3bkb9nlYxcOAh+t</span><br><span class="line">KMQb3+GKyprLXEhYaDWAdGbhwKev7uXQ9i3WuZHTgwFnqmz+iwQSWZMHr9AMhzX1</span><br><span class="line">V/Ds6cpUqTZOXoIdTMxipkT5pPygYTnnvHwsqz6GgT0CcLM7Tod8c+RdXlMXFnFa</span><br><span class="line">nt5Oj0qKojswdvWtiU5Si9gmi/drmamgV0gBy/o/NrPbS6izAmTKTuwTgL/dxPTO</span><br><span class="line">djBMxM8frF5ZLMD6pZDzvdoDZgdxue++o7Yu16p+IW8TGW/WhMxB6e1ptbxc9hjT</span><br><span class="line">pt01</span><br><span class="line">-----END CERTIFICATE REQUEST-----</span><br><span class="line">传送到Centos7；</span><br><span class="line">[root@centos6 ~]#scp /app/service.csr   192.168.239.131:/etc/pki/CA/</span><br><span class="line">root@192.168.239.131&apos;s password:</span><br><span class="line">Permission denied, please try again.</span><br><span class="line">root@192.168.239.131&apos;s password:</span><br><span class="line">Permission denied, please try again.</span><br><span class="line">root@192.168.239.131&apos;s password:</span><br><span class="line">service.csr                                                                            100% 1700     1.7KB/s   00:00</span><br></pre></td></tr></table></figure></p>
<p>Centos7颁发证书及审核；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 CA]#ls</span><br><span class="line">cacert.pem  certs  crl  index.txt  newcerts  private  serial  service.csr  -text</span><br><span class="line">[root@centos7 CA]#mkdir csr ----------创建文件夹，审核文件集中放置；</span><br><span class="line">[root@centos7 CA]#mv service.csr ./csr</span><br><span class="line">[root@centos7 CA]#ls</span><br><span class="line">cacert.pem  crl  index.txt  private  -text</span><br><span class="line">certs       csr  newcerts   serial</span><br><span class="line">[root@centos7 CA]#tree</span><br><span class="line">.</span><br><span class="line">├── cacert.pem</span><br><span class="line">├── certs</span><br><span class="line">├── crl</span><br><span class="line">├── csr</span><br><span class="line">│   └── service.csr</span><br><span class="line">├── index.txt</span><br><span class="line">├── newcerts</span><br><span class="line">├── private</span><br><span class="line">│   └── cakey.pem</span><br><span class="line">├── serial</span><br><span class="line">[root@centos7 CA]#openssl ca -in /etc/pki/CA/csr/service.csr  -out /etc/pki/CA/certs/service.crt -days 100</span><br><span class="line">Using configuration from /etc/pki/tls/openssl.cnf</span><br><span class="line">unable to load number from /etc/pki/CA/serial</span><br><span class="line">error while loading serial number</span><br><span class="line">140193415731104:error:0D066096:asn1 encoding routines:a2i_ASN1_INTEGER:short line:f_int.c:215:</span><br><span class="line">[root@centos7 CA]#cat /etc/pki/CA/serial</span><br><span class="line">[root@centos7 CA]#echo 01 &gt; /etc/pki/CA/serial</span><br><span class="line">----/etc/pki/CA/serial 编号为二位数；</span><br><span class="line">[root@centos7 CA]#openssl ca -in /etc/pki/CA/csr/service.csr  -out /etc/pki/CA/certs/service.crt -days 100</span><br><span class="line">Using configuration from /etc/pki/tls/openssl.cnf</span><br><span class="line">Check that the request matches the signature</span><br><span class="line">Signature ok</span><br><span class="line">Certificate Details:</span><br><span class="line">        Serial Number: 1 (0x1)</span><br><span class="line">        Validity</span><br><span class="line">            Not Before: Jul 17 13:37:38 2017 GMT</span><br><span class="line">            Not After : Oct 25 13:37:38 2017 GMT</span><br><span class="line">        Subject:</span><br><span class="line">            countryName               = CN</span><br><span class="line">            stateOrProvinceName       = henan</span><br><span class="line">            organizationName          = magedu</span><br><span class="line">            organizationalUnitName    = beiguo</span><br><span class="line">            commonName                = *.magedu.com</span><br><span class="line">        X509v3 extensions:</span><br><span class="line">            X509v3 Basic Constraints:</span><br><span class="line">                CA:FALSE</span><br><span class="line">            Netscape Comment:</span><br><span class="line">                OpenSSL Generated Certificate</span><br><span class="line">            X509v3 Subject Key Identifier:</span><br><span class="line">                76:03:DB:66:CA:C2:F7:36:0A:A8:CA:8E:EA:06:EB:CE:50:23:C9:15</span><br><span class="line">            X509v3 Authority Key Identifier:</span><br><span class="line">                keyid:DC:FC:21:C7:A1:2F:F8:1F:F7:94:9A:A7:13:53:81:48:D5:0F:69:59</span><br><span class="line"></span><br><span class="line">Certificate is to be certified until Oct 25 13:37:38 2017 GMT (100 days)</span><br><span class="line">Sign the certificate? [y/n]:y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 out of 1 certificate requests certified, commit? [y/n]y</span><br><span class="line">Write out database with 1 new entries</span><br><span class="line">Data Base Updated</span><br><span class="line">[root@centos7 CA]#tree</span><br><span class="line">.</span><br><span class="line">├── cacert.pem</span><br><span class="line">├── certs</span><br><span class="line">│   └── service.crt</span><br><span class="line">├── crl</span><br><span class="line">├── csr</span><br><span class="line">│   └── service.csr</span><br><span class="line">├── index.txt</span><br><span class="line">├── index.txt.attr</span><br><span class="line">├── index.txt.old</span><br><span class="line">├── newcerts</span><br><span class="line">│   └── 01.pem</span><br><span class="line">├── private</span><br><span class="line">│   └── cakey.pem</span><br><span class="line">├── serial</span><br><span class="line">├── serial.old</span><br><span class="line">[root@centos7 CA]#ll certs/service.crt newcerts/01.pem</span><br><span class="line">-rw-r--r--. 1 root root 5928 Jul 17 21:37 certs/service.crt</span><br><span class="line">-rw-r--r--. 1 root root 5928 Jul 17 21:37 newcerts/01.pem</span><br><span class="line">[root@centos7 CA]#cat serial</span><br><span class="line">02</span><br><span class="line">[root@centos7 CA]#cat index.txt</span><br><span class="line">V       171025133738Z           01      unknown /C=CN/ST=henan/O=magedu/OU=beiguo/CN=*.magedu.com</span><br><span class="line"></span><br><span class="line">查看审核完成后生成的证书；</span><br><span class="line">#openssl x509 -in certs/service.crt -noout -text</span><br><span class="line">Certificate:</span><br><span class="line">    Data:</span><br><span class="line">        Version: 3 (0x2)</span><br><span class="line">        Serial Number: 1 (0x1)</span><br><span class="line">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class="line">        Issuer: C=CN, ST=henan, L=zhengzhou, O=magedu, OU=m24, CN=ca.magedu.com</span><br><span class="line">        Validity</span><br><span class="line">            Not Before: Jul 17 13:37:38 2017 GMT</span><br><span class="line">            Not After : Oct 25 13:37:38 2017 GMT</span><br><span class="line">        Subject: C=CN, ST=henan, O=magedu, OU=beiguo, CN=*.magedu.com</span><br><span class="line">        Subject Public Key Info:</span><br><span class="line">            Public Key Algorithm: rsaEncryption</span><br><span class="line">                Public-Key: (4096 bit)</span><br><span class="line">                Modulus:</span><br><span class="line">                    00:c0:06:91:76:eb:71:87:69:ba:80:24:b5:1d:54:</span><br><span class="line">                    2f:b0:57:52:43:f9:a2:09:f7:58:f2:8c:0c:36:46:</span><br><span class="line">                    78:9c:3e:ff:12:a4:9e:9d:56:c0:d8:f9:5f:b9:85:</span><br><span class="line">                    5e:5c:f7:75:70:38:a0:b9:5d:ed:d9:8d:29:d1:7e:</span><br><span class="line">                    8e:35:39:8e:dd:5d:a3:9a:bb:aa:c3:fe:84:a1:89:</span><br><span class="line">                    60:a9:ca:bd:cb:3a:a3:39:b0:b4:67:43:da:9b:bf:</span><br><span class="line">                    8e:22:be:b4:ff:ca:f0:01:bc:26:6e:8a:cf:c8:5e:</span><br><span class="line">                    f1:d9:9a:6a:c7:d1:00:80:06:49:96:ef:40:3a:c6:</span><br><span class="line">                    8c:f8:84:17:f7:5d:7f:7f:63:c0:19:15:e3:e9:94:</span><br><span class="line">                    c4:35:dd:22:9d:09:3c:f3:5f:ab:17:ac:40:a4:aa:</span><br><span class="line">                    e0:d8:f6:f7:00:80:fe:2f:6c:9f:3b:fe:7d:da:c1:</span><br><span class="line">                    4d:e5:8e:13:3f:c9:de:53:43:69:2c:93:39:bd:b5:</span><br><span class="line">                    62:13:2f:90:1e:82:77:76:15:d3:c1:1c:b6:0b:ec:</span><br><span class="line">                    ea:77:a8:31:c8:d7:24:6a:01:f9:0b:fc:23:40:12:</span><br><span class="line">                    7b:81:e4:96:e0:0c:27:0e:ab:67:da:f3:22:ab:46:</span><br><span class="line">                    94:00:62:d0:94:0b:a6:5e:d4:02:a1:09:d7:d8:6e:</span><br><span class="line">                    1b:05:29:c7:e3:f7:10:24:6f:d1:10:65:5b:35:1c:</span><br><span class="line">                    d8:72:cd:4a:cc:1d:03:35:fa:14:b1:d4:ad:f4:9b:</span><br><span class="line">                    01:4c:74:a3:ec:0c:2c:d3:9e:38:74:63:1e:86:79:</span><br><span class="line">                    9f:31:6d:4e:d5:a8:71:f5:f2:40:11:55:77:ef:36:</span><br><span class="line">                    51:dd:f3:4f:42:2b:44:d9:27:ec:d6:9c:f9:19:a4:</span><br><span class="line">                    50:b2:85:d4:12:d4:c7:04:b3:5a:ba:f8:e4:dd:68:</span><br><span class="line">                    02:12:bd:94:f0:bd:84:00:65:b5:0f:27:d1:a7:99:</span><br><span class="line">                    9b:5c:05:35:2d:1e:66:fc:41:fe:9c:2e:89:58:cd:</span><br><span class="line">                    2d:48:e3:65:f4:d5:31:66:9c:78:fd:37:54:cf:d7:</span><br><span class="line">                    d0:95:01:1d:17:6a:72:25:14:ca:b8:20:c5:e4:58:</span><br><span class="line">                    1b:af:2e:a2:25:88:01:67:0a:ea:42:db:fc:ae:ca:</span><br><span class="line">                    0d:cd:52:5c:cf:b0:c8:aa:0f:fe:4d:d4:87:0f:71:</span><br><span class="line">                    e5:e2:c8:71:e3:c1:90:85:8f:27:15:05:c2:9c:c3:</span><br><span class="line">                    7f:5a:aa:ae:98:cf:b7:ab:4d:44:7c:d6:ae:6c:ad:</span><br><span class="line">                    a0:59:8d:55:ae:03:9d:89:6f:c2:c4:03:cf:ce:7b:</span><br><span class="line">                    75:ba:ab:6d:e1:c8:1d:89:d3:50:19:70:57:b9:6a:</span><br><span class="line">                    1e:cf:5a:4c:fa:f3:bc:fd:5f:4d:f3:e0:ef:81:29:</span><br><span class="line">                    32:51:16:4c:92:5a:44:7e:51:ed:c5:2a:4c:15:0f:</span><br><span class="line">                    84:eb:7f</span><br><span class="line">                Exponent: 65537 (0x10001)</span><br><span class="line">        X509v3 extensions:</span><br><span class="line">            X509v3 Basic Constraints:</span><br><span class="line">                CA:FALSE</span><br><span class="line">            Netscape Comment:</span><br><span class="line">                OpenSSL Generated Certificate</span><br><span class="line">            X509v3 Subject Key Identifier:</span><br><span class="line">                76:03:DB:66:CA:C2:F7:36:0A:A8:CA:8E:EA:06:EB:CE:50:23:C9:15</span><br><span class="line">            X509v3 Authority Key Identifier:</span><br><span class="line">                keyid:DC:FC:21:C7:A1:2F:F8:1F:F7:94:9A:A7:13:53:81:48:D5:0F:69:59</span><br><span class="line"></span><br><span class="line">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class="line">         ca:19:1e:c3:71:9e:c2:22:5d:c9:65:7b:92:d5:c8:d9:5f:56:</span><br><span class="line">         64:74:5c:b5:e4:c7:ec:23:9a:1f:2a:92:20:e7:ca:39:80:f1:</span><br><span class="line">         cd:fc:5a:00:f2:79:75:49:a4:0a:fd:ec:82:36:b6:60:63:69:</span><br><span class="line">         9b:ac:5b:71:39:d3:88:8f:ae:73:de:ff:59:25:7b:89:ee:30:</span><br><span class="line">         76:90:46:64:62:67:d5:38:25:9a:08:df:67:e9:53:55:3a:e5:</span><br><span class="line">         8b:28:c5:97:44:c1:11:6d:cb:c6:39:2d:27:6c:75:f5:d4:cc:</span><br><span class="line">         db:26:a9:df:38:34:0f:ab:c1:c9:15:08:e9:22:e0:cc:de:33:</span><br><span class="line">         ac:03:42:f7:2e:fe:b5:64:11:d5:45:c7:11:d5:ae:a6:86:6e:</span><br><span class="line">         be:a9:bb:82:2e:fb:f0:16:e6:82:36:5e:8a:99:e6:ce:53:f0:</span><br><span class="line">         8b:9f:d3:9a:44:75:e6:a9:2a:04:2e:3a:3a:a6:eb:2e:a1:b8:</span><br><span class="line">         a7:44:69:1c:1d:f8:59:46:e3:85:7a:2a:0c:fc:9f:39:83:89:</span><br><span class="line">         44:62:f8:b1:76:36:7f:73:d9:ae:9f:96:ab:4a:6d:a9:68:19:</span><br><span class="line">         fe:e1:47:cf:2d:f3:74:21:97:0e:52:d1:fd:e1:4b:61:35:96:</span><br><span class="line">         59:2e:09:8c:ac:e5:3f:f1:15:90:66:4f:0a:16:87:06:53:62:</span><br><span class="line">         ef:5d:8a:bb</span><br><span class="line"> 将证书发送到Centos6;</span><br><span class="line">[root@centos7 CA]#scp certs/service.crt   192.168.239.141:/app</span><br><span class="line">root@192.168.239.141&apos;s password:</span><br><span class="line">service.crt           100% 5928     5.8KB/s   00:00</span><br></pre></td></tr></table></figure></p>

    </div>
  </section>

  
  
</article>
      <script>NProgress.set(0.6);</script>
    </main>
    
    <footer class="footer">
  <div class="footer-wrap">
    <div class="footer-link">
      
      <h3>LINKS</h3>
      <p>
        
          <a href="http://1x0.xyz/" target="_blank">Tian1x0</a>
        
          <a href="http://www.royalmice.com/hankzhou/" target="_blank">Hankzhou</a>
        
          <a href="http://sjydh.me/" target="_blank">设计有点货</a>
        
          <a href="https://developers.google.com/web/fundamentals/" target="_blank">Web fundamentals</a>
        
      </p>
      
    </div>
    <div class="footer-tags">
      
        <h3>TAGS</h3>        
        <div class="tags">
             <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/7修改密码，故障修复/">7修改密码，故障修复</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ansible命令行中的应用/">Ansible命令行中的应用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ansible角色/">Ansible角色</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CA/">CA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Centos6半自动化安装/">Centos6半自动化安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Centos6手动安装步骤/">Centos6手动安装步骤</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Centos7编译安装/">Centos7编译安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DNS/">DNS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux系统调优/">Linux系统调优</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mysqldump数据库恢复/">Mysqldump数据库恢复</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mysql主从复制/">Mysql主从复制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OSI模型的七层结构/">OSI模型的七层结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RAID/">RAID</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/awk/">awk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos6/">centos6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dns转发/">dns转发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dstat/">dstat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/httpd的web账号密码管理/">httpd的web账号密码管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iostat/">iostat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keepalived/">keepalived</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lib64库文件，内核修复/">lib64库文件，内核修复</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lvs服务nat模式/">lvs服务nat模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rpm/">rpm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sed/">sed</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tag1/">tag1</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tag2/">tag2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tar/">tar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/text/">text</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/varnish/">varnish</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim编辑器/">vim编辑器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vmstat/">vmstat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yum/">yum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zabbix-server-zabbix-agent/">zabbix-server/zabbix-agent</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/修复MBR分区，故障处理/">修复MBR分区，故障处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/共享文件系统，vsftpd/">共享文件系统，vsftpd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/创建mysql数据库索引/">创建mysql数据库索引</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/循环语句/">循环语句</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据备份及数据恢复/">数据备份及数据恢复</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日志服务/">日志服务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/进程管理，kill/">进程管理，kill</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/逻辑卷/">逻辑卷</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/防火墙，SElinux/">防火墙，SElinux</a></li></ul>
          </div>
      
    </div>
    <div class="footer-info">
        <div>Theme <span class="codename"><a href="https://github.com/GGICE/hexo-icer" target="_blank">icer</a></span> designed & coded by <a href="https://ice.gs/" target="_blank">GGICE</a></div>
        <div>Copyright &copy; 2018, <a href="/">Hexo</a>  . All rights reserved .</div>
      </div>
  </div>
</footer>


    <script>NProgress.set(0.8);</script>
    
  </div>

  <script src="//cdnjs.xyz/libs/highlight/9.12.0/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/js/main.js"></script>

<!-- Commit -->



  <script>
    NProgress.done();
  </script>
  
</body>
</html>
