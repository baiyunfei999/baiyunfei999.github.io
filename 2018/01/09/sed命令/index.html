<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>sed命令 | Hexo</title>
  <meta name="description" content="A geeker blog." />
  <meta name="keywords" content="hexo,theme,icer,ggice" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="sed  stream查看 ，修改文件内容grep 查看文件内容 模式空间、保存空间（暂存空间） sed【option】 #cp /etc/passwd passwd #sed -n passwd 常用选项 -n ; 不输出模式空间内容到屏幕，即不自动打印  -e ; 多点编辑  -f ；/PATH/SCRIPT_FILE;从指定文件中读取编辑  -r ;支持使用扩展正则表达式  -i.bak ;">
<meta name="keywords" content="sed">
<meta property="og:type" content="article">
<meta property="og:title" content="sed命令">
<meta property="og:url" content="http://yoursite.com/2018/01/09/sed命令/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="sed  stream查看 ，修改文件内容grep 查看文件内容 模式空间、保存空间（暂存空间） sed【option】 #cp /etc/passwd passwd #sed -n passwd 常用选项 -n ; 不输出模式空间内容到屏幕，即不自动打印  -e ; 多点编辑  -f ；/PATH/SCRIPT_FILE;从指定文件中读取编辑  -r ;支持使用扩展正则表达式  -i.bak ;">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/6132998-9680fdfa4c3edc54.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2018-01-09T04:07:46.950Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="sed命令">
<meta name="twitter:description" content="sed  stream查看 ，修改文件内容grep 查看文件内容 模式空间、保存空间（暂存空间） sed【option】 #cp /etc/passwd passwd #sed -n passwd 常用选项 -n ; 不输出模式空间内容到屏幕，即不自动打印  -e ; 多点编辑  -f ；/PATH/SCRIPT_FILE;从指定文件中读取编辑  -r ;支持使用扩展正则表达式  -i.bak ;">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/6132998-9680fdfa4c3edc54.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
  
  
  
  <link rel='stylesheet' href='//cdnjs.xyz/libs/nprogress/0.2.0/nprogress.css'/>
  <link rel="stylesheet" href="//cdnjs.xyz/libs/highlight/9.12.0/styles/github-gist.css">
  <link rel="stylesheet" href="//at.alicdn.com/t/font_405585_2mmfrz9pgd7h9f6r.css">
  <script src='//cdnjs.xyz/libs/nprogress/0.2.0/nprogress.js'></script>
  <!-- <script>try{Typekit.load({ async: false });}catch(e){}</script> -->
  <link rel="stylesheet" href="/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
  ga('create', 'UA-93986029-1', 'auto');
  ga('send', 'pageview');
  
</script>
<!-- End Google Analytics -->


</head>

<body>
  
  <script>NProgress.start();</script>
  
  <div id="site-wrapper">
    
    <header class="header">
  <div class="header-wrapper">
    <a href="/">
      <img src="/image/logo.jpg" class="logo"/>
      <!-- <span class="site-desc">
        
      </span> -->
    </a>
    <div class="social-wrapper">
      
        
          <a href="https://twitter.com/iggice" class="social twitter" target="_blank" rel="external">
            <span class="iconfont icon-twitter"></span>
          </a>
          
          <a href="https://github.com/ggice" class="social github" target="_blank" rel="external">
            <span class="iconfont icon-github"></span>
          </a>
          
          <a href="http://ggice.tumblr.com/" class="social tumblr" target="_blank" rel="external">
            <span class="iconfont icon-tumblr"></span>
          </a>
          
          <a href="https://dribbble.com/ggice" class="social dribbble" target="_blank" rel="external">
            <span class="iconfont icon-dribbble"></span>
          </a>
          
          <a href="mailto:i@ice.gs" class="social email" target="_blank" rel="external">
            <span class="iconfont icon-email"></span>
          </a>
          
          <a href="/atom.xml" class="social rss" target="_blank" rel="external">
            <span class="iconfont icon-rss"></span>
          </a>
          
      
      
      <a href="#" class="social search-do" target="_blank" rel="external">
        <span class="iconfont icon-search"></span>
      </a>
            
      <!-- <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://yoursite.com"></form> -->
    </div>
    <div class="search-wrap">
      <div class="search-content animated fade-in">
        <p class="search-input">
          <span class="iconfont icon-search"></span>
          <input tabindex="1">
        </p>
        <ul class="search-result">
            
              <div class="tags">
                   <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/7修改密码，故障修复/">7修改密码，故障修复</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Centos6半自动化安装/">Centos6半自动化安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Centos6手动安装步骤/">Centos6手动安装步骤</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux系统调优/">Linux系统调优</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RAID/">RAID</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos6/">centos6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lib64库文件，内核修复/">lib64库文件，内核修复</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rpm/">rpm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sed/">sed</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tag1/">tag1</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tag2/">tag2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tar/">tar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/text/">text</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim编辑器/">vim编辑器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/修复MBR分区，故障处理/">修复MBR分区，故障处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/共享文件系统，vsftpd/">共享文件系统，vsftpd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/逻辑卷/">逻辑卷</a></li></ul>
                </div>
            
        </ul>
      </div>
    </div>
    <nav class="header-nav">
      
        <a href="/" class="archives">
          home
        </a>
        
        <a href="/tags/web-development/" class="archives">
          web development
        </a>
        
        <a href="/tags/soft/" class="archives">
          soft
        </a>
        
        <a href="/tags/os/" class="archives">
          os
        </a>
        
        <a href="/archives" class="archives">
          archives
        </a>
        
        <a href="/about/" class="archives">
          About
        </a>
        
    </nav>
  </div>
</header>
    <script>NProgress.set(0.4);</script>
    
    <main id="main" role="main">
      <article id="post-sed命令"
  class="post article white-box article-type-post animated fade-in-top"
  itemscope itemprop="blogPost">
  <section class="post-header article-header">
    <h2 class="title">
        <a href="/2018/01/09/sed命令/">
          sed命令
        </a>
      </h2>
      <div class="subtitle">
          <time>
            Jan 9, 2018
          </time>
          
            <span class="tags">
                <span class="iconfont icon-tag"></span>
                <a class="tag-link" href="/tags/sed/">sed</a>
              </span>
          
      </div>
  </section>
  <section class="content">
    <div class="article-entry" itemprop="articleBody">
      <p>sed  stream<br>查看 ，修改文件内容<br>grep 查看文件内容</p>
<pre><code>模式空间、保存空间（暂存空间）
</code></pre><p>sed【option】</p>
<pre><code>#cp /etc/passwd passwd
#sed -n passwd
</code></pre><p>常用选项</p>
<pre><code>-n ; 不输出模式空间内容到屏幕，即不自动打印

-e ; 多点编辑

-f ；/PATH/SCRIPT_FILE;从指定文件中读取编辑

-r ;支持使用扩展正则表达式

-i.bak ;备份文件内容并原处编辑
</code></pre><p>script; ‘地址命令 ‘</p>
<pre><code>地址加命令
不给地址，全文进行处理

#sed &apos;p&apos; passwd

打印两行，一个自动打印，加上打印

#sed -n &apos;p&apos; passwd  

打印一次

#cat /etc/passwd |sed -n &apos;p&apos;

单地址



#sed -n &apos;1p&apos;passwd

#ifconfig enc33 |sed -n &apos;2p&apos;

模式

#sed -n &apos;/^r/p&apos;passwd

#grep &apos;^r&apos; passwd

#sed -n &apos;3,6 p&apos; passwd

3到6

#sed -n &apos;3,+6p&apos; passwd

3+6行

#/pat1/,/pat2/

#sed -n &apos;/^h/,/^s/p&apos; passwd
h开头 s结尾
循环寻找

#,/pat/ 行号，

#sed -n &apos;3,/^s/p‘ passwd

sed 步进

一次增加多少


#echo {1..100}

#sep 100|sed -n &apos;1~2p&apos;

奇数

#seq 100|sed -n &apos;2~2p&apos;

偶数


#cat -n passwd |sed -n &apos;1~2!p&apos;

取反


#cat -n passwd|sed &apos;2d&apos;

#seq 100&gt;f1

#sed &apos;2d&apos; f1

#sed -i &apos;100d&apos; f1
#sed -i &apos;1~2d&apos; f1

#sed -i.bak &apos;1~2d&apos; f1
删除前备份
注意加后缀.bak
</code></pre><p>编辑命令</p>
<pre><code>d 删除模式空间匹配的行

p 显示模式空间的内容

a  在指定行后面追加文本、支持使用、\n实现多行追加

i  在行前面插入文本

c  替换行为单行或多行文本

w  保存模式匹配的行至指定的文件中

r  读取指定文件的文本至模式空间中匹配到的行后

=  为模式空间中的行打印行号

!  模式空间中匹配行取反处理

s/// 查找替换，支持使用其它分隔符，s@@@,s###
</code></pre><p>替换标记；<br>    g 行全局替换<br>    p 显示替换成功的行<br>    w /PATH/TO/SOMEFILE 将替换成功的行保存在文件中</p>
<pre><code># sed &apos;90anew line1\nnewline2\nnewline3&apos; f1
90行后加内容 换行

# sed &apos;90a\ new line\nnewline2\nnewline3&apos; f1
\ 加边界

# sed &apos;90i\ new line\nnewline2\nnewline3&apos; f1
在90的前面加

# sed &apos;90c\ new line\nnewline2\nnewline3&apos; f1
替代90行前面

# sed &apos;90w /root/f2&apos; f1
90行保存到f2 里

#  sed &apos;10r /etc/issue&apos; f1
将新的文件渎进f1

# sed &apos;10,30r /etc/issue&apos; f1
匹配到的每个行后 加新文件

#sed &apos;=&apos; passwd
加行号
#sed -n &apos;/^r/&apos;=passwd
只显示行号sed

#sed -n &apos;/.*root.*/=&apos; passwd
包含root的行号

#grep root passwd 

#grep -n root passwd


搜索替代

#vim f11
root.......
#sed &apos;s/root/ROOT/&apos; f11
替换root
#sed &apos;2-2s/root/ROOT/&apos;f11
替换 偶数行的搜索替换
#sed &apos;2-2s/root/ROOT/g&apos; f11
整行全部替换
#sed &apos;2-2s/root/ROOT/gp&apos; f11
只显示匹配到的行
#sed &apos;2-2s/root/ROOT/w f22&apos; f11
搜索完另存为f22
</code></pre><p>高级编辑命令</p>
<pre><code>h 把模式空间的内容覆盖至保持空间
H 把模式空间中的内容追加至保持空间
g 从保持空间取出数据覆盖至模式空间
G 从保持空间取出内容追加至模式空间
x 把模式空间的内容与保持空间的内容互换
n  读取匹配到的行的下一行覆盖至模式空间
N 读取匹配到的行的下一行追加至模式空间
d 删除模式空间中的行
D 删除当前模式空间开端至\n的内容 （不在传至标准输出），放弃之后的命令，但是对剩余模式空间从新执行sed

#sed &apos;s/^/#/&apos; install.log
#echo &quot;/etc/sysconfig/network&quot;
#echo &quot;/etc/sysconfig/networrk-scripts/&quot;
</code></pre><p>取出基名 目录名</p>
<pre><code>echo &quot;/etc/sysconfing/netwoerk-scripts/&quot; |sed -r &apos;s@（^/.*/）（[^/]+/?）@\2@&apos;
echo &quot;/etc/sysconfing/netwoerk-scripts/&quot; |sed -r &apos;s@（^/.*/）（[^/]+/?）@\1@&apos;
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/6132998-9680fdfa4c3edc54.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="QQ截图20170624195228.png"></p>
<p>取出IP地址</p>
<pre><code>#ifconfig eth0|sed -n 2p
#ifconfig eth0|sed -n 2p|sed &apos;s/^.*r://&apos;|sed &apos;/ .*/d&apos;
#ifconfig eth0|sed -n 2p|sed &apos;s/^.*r://&apos;|sed&apos;s/ .*//&apos;
#ifconfig eth0|sed -n 2p |sed -e &apos;s/^.*r://&apos; -e &apos;s/.*//&apos;
</code></pre><p>模式空间 — 保持空间</p>
<pre><code>#seq 100 |sed -n &apos;n;p&apos;
#sed -n &apos;n;p&apos;

在模式空间单行进行处理，在执行命令时sed -n 
&apos;n;p&apos;时 模式空间 已进入1数字， -n 所以不打印
不输出屏幕，‘n;p’n为匹配到的下一行覆盖模式
空间的1数字并打印输出到屏幕后，模式空间转为
为空，执行下一条匹配的行3,3进入模式空间后3的
下一行进入模式空间进行覆盖并输出屏幕，并结束
一段操作，模式空间转为空，执行下一条，直到循
环结束；
</code></pre><p>hold space 保持空间</p>
<pre><code>#sed &apos;1!G;h;$!d &apos; FILE
#seq 100 |sed &apos;1!G;h；$!d &apos;
倒序输出、
非第一行时追加至模式空间，模式空间覆盖至保存空间，非结尾时删除模式空间的行

#seq 100 |sed‘N；D’
N匹配的行追加
D在上一条命令执行时进行删除操作
第100没有追加所以不执行D命令

#seq 100|sed &apos;N;d&apos;
清空
#cat passwd |sed &apos;N;D&apos;
#seq 100 |sed &apos;$!N;$!D&apos;
剩两行，非结尾时追加，非结尾时执行D命令
100追加时是结尾所以不执行D命令就不删除99行
</code></pre><p>```</p>

    </div>
  </section>

  
  
</article>
      <script>NProgress.set(0.6);</script>
    </main>
    
    <footer class="footer">
  <div class="footer-wrap">
    <div class="footer-link">
      
      <h3>LINKS</h3>
      <p>
        
          <a href="http://1x0.xyz/" target="_blank">Tian1x0</a>
        
          <a href="http://www.royalmice.com/hankzhou/" target="_blank">Hankzhou</a>
        
          <a href="http://sjydh.me/" target="_blank">设计有点货</a>
        
          <a href="https://developers.google.com/web/fundamentals/" target="_blank">Web fundamentals</a>
        
      </p>
      
    </div>
    <div class="footer-tags">
      
        <h3>TAGS</h3>        
        <div class="tags">
             <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/7修改密码，故障修复/">7修改密码，故障修复</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Centos6半自动化安装/">Centos6半自动化安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Centos6手动安装步骤/">Centos6手动安装步骤</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux系统调优/">Linux系统调优</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RAID/">RAID</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos6/">centos6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lib64库文件，内核修复/">lib64库文件，内核修复</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rpm/">rpm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sed/">sed</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tag1/">tag1</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tag2/">tag2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tar/">tar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/text/">text</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim编辑器/">vim编辑器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/修复MBR分区，故障处理/">修复MBR分区，故障处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/共享文件系统，vsftpd/">共享文件系统，vsftpd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/逻辑卷/">逻辑卷</a></li></ul>
          </div>
      
    </div>
    <div class="footer-info">
        <div>Theme <span class="codename"><a href="https://github.com/GGICE/hexo-icer" target="_blank">icer</a></span> designed & coded by <a href="https://ice.gs/" target="_blank">GGICE</a></div>
        <div>Copyright &copy; 2018, <a href="/">Hexo</a>  . All rights reserved .</div>
      </div>
  </div>
</footer>


    <script>NProgress.set(0.8);</script>
    
  </div>

  <script src="//cdnjs.xyz/libs/highlight/9.12.0/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/js/main.js"></script>

<!-- Commit -->



  <script>
    NProgress.done();
  </script>
  
</body>
</html>
